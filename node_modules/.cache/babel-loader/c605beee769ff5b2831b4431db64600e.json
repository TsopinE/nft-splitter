{"ast":null,"code":"var _jsxFileName = \"/Users/tsopin/Desktop/split-nft/src/util/interact.js\";\nimport { pinJSONToIPFS } from \"./pinata.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire(\"dotenv\").config();\n\nconst alchemyKey = process.env.REACT_APP_ALCHEMY_KEY;\n\nconst contractABI = require(\"../contract-abi.json\");\n\nconst contractAddress = \"0xa210926a311284106eD7765c44c07A517bADE88E\";\n\nconst {\n  createAlchemyWeb3\n} = require(\"@alch/alchemy-web3\");\n\nconst web3 = createAlchemyWeb3(alchemyKey);\nexport const connectWallet = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      const obj = {\n        status: \"ğŸ‘†ğŸ½ Write a message in the text-field above.\",\n        address: addressArray[0]\n      };\n      return obj;\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"ğŸ˜¥ \" + err.message\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: `https://metamask.io/download.html`,\n            children: \"You must install Metamask, a virtual Ethereum wallet, in your browser.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)\n    };\n  }\n};\nexport const getCurrentWalletConnected = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_accounts\"\n      });\n\n      if (addressArray.length > 0) {\n        return {\n          address: addressArray[0],\n          status: \"ğŸ‘†ğŸ½ Write a message in the text-field above.\"\n        };\n      } else {\n        return {\n          address: \"\",\n          status: \"ğŸ¦Š Connect to Metamask using the top right button.\"\n        };\n      }\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"ğŸ˜¥ \" + err.message\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: `https://metamask.io/download.html`,\n            children: \"You must install Metamask, a virtual Ethereum wallet, in your browser.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    };\n  }\n};\n\nasync function loadContract() {\n  return new web3.eth.Contract(contractABI, contractAddress);\n}\n\nexport const setApproval = async tokenContractAddress => {\n  if (tokenContractAddress == \"\") {\n    return {\n      success: false,\n      status: \"â—Please make sure all fields are completed\"\n    };\n  } //make metadata\n\n\n  window.contract = await new web3.eth.Contract(contractABI, tokenContractAddress);\n  const transactionParameters = {\n    to: contractAddress,\n    // Required except during contract publications.\n    from: window.ethereum.selectedAddress,\n    // must match user's active address.\n    data: window.contract.methods.setApprovalForAll(contractAddress, true).encodeABI()\n  };\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [transactionParameters]\n    });\n    return {\n      success: true,\n      status: \"âœ… Check out your transaction on Etherscan: https://ropsten.etherscan.io/tx/\" + txHash\n    };\n  } catch (error) {\n    return {\n      success: false,\n      status: \"ğŸ˜¥ Something went wrong: \" + error.message\n    };\n  }\n};\nexport const transferToken = async (tokenContractAddress, tokenID) => {\n  if (tokenContractAddress == \"\" || tokenID == \"\") {\n    return {\n      success: false,\n      status: \"â—Please make sure all fields are completed\"\n    };\n  } //make metadata\n\n\n  window.contract = await new web3.eth.Contract(contractABI, contractAddress);\n  const transactionParameters = {\n    to: contractAddress,\n    // Required except during contract publications.\n    from: window.ethereum.selectedAddress,\n    // must match user's active address.\n    data: window.contract.methods.addToken(tokenContractAddress, tokenID).encodeABI()\n  };\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [transactionParameters]\n    });\n    return {\n      success: true,\n      status: \"âœ… Check out your transaction on Etherscan: https://ropsten.etherscan.io/tx/\" + txHash\n    };\n  } catch (error) {\n    return {\n      success: false,\n      status: \"ğŸ˜¥ Something went wrong: \" + error.message\n    };\n  }\n};","map":{"version":3,"sources":["/Users/tsopin/Desktop/split-nft/src/util/interact.js"],"names":["pinJSONToIPFS","require","config","alchemyKey","process","env","REACT_APP_ALCHEMY_KEY","contractABI","contractAddress","createAlchemyWeb3","web3","connectWallet","window","ethereum","addressArray","request","method","obj","status","address","err","message","getCurrentWalletConnected","length","loadContract","eth","Contract","setApproval","tokenContractAddress","success","contract","transactionParameters","to","from","selectedAddress","data","methods","setApprovalForAll","encodeABI","txHash","params","error","transferToken","tokenID","addToken"],"mappings":"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","sourcesContent":["import { pinJSONToIPFS } from \"./pinata.js\";\nrequire(\"dotenv\").config();\nconst alchemyKey = process.env.REACT_APP_ALCHEMY_KEY;\nconst contractABI = require(\"../contract-abi.json\");\nconst contractAddress = \"0xa210926a311284106eD7765c44c07A517bADE88E\";\nconst { createAlchemyWeb3 } = require(\"@alch/alchemy-web3\");\nconst web3 = createAlchemyWeb3(alchemyKey);\n\nexport const connectWallet = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_requestAccounts\",\n      });\n      const obj = {\n        status: \"ğŸ‘†ğŸ½ Write a message in the text-field above.\",\n        address: addressArray[0],\n      };\n      return obj;\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"ğŸ˜¥ \" + err.message,\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: (\n        <span>\n          <p>\n            {\" \"}\n            ğŸ¦Š{\" \"}\n            <a target=\"_blank\" href={`https://metamask.io/download.html`}>\n              You must install Metamask, a virtual Ethereum wallet, in your\n              browser.\n            </a>\n          </p>\n        </span>\n      ),\n    };\n  }\n};\n\nexport const getCurrentWalletConnected = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_accounts\",\n      });\n      if (addressArray.length > 0) {\n        return {\n          address: addressArray[0],\n          status: \"ğŸ‘†ğŸ½ Write a message in the text-field above.\",\n        };\n      } else {\n        return {\n          address: \"\",\n          status: \"ğŸ¦Š Connect to Metamask using the top right button.\",\n        };\n      }\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"ğŸ˜¥ \" + err.message,\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: (\n        <span>\n          <p>\n            {\" \"}\n            ğŸ¦Š{\" \"}\n            <a target=\"_blank\" href={`https://metamask.io/download.html`}>\n              You must install Metamask, a virtual Ethereum wallet, in your\n              browser.\n            </a>\n          </p>\n        </span>\n      ),\n    };\n  }\n};\n\nasync function loadContract() {\n  return new web3.eth.Contract(contractABI, contractAddress);\n}\n\nexport const setApproval = async (tokenContractAddress) => {\n  if (tokenContractAddress == \"\") {\n    return {\n      success: false,\n      status: \"â—Please make sure all fields are completed\",\n    };\n  }\n\n  //make metadata\n\n\n  window.contract = await new web3.eth.Contract(contractABI, tokenContractAddress);\n\n  const transactionParameters = {\n    to: contractAddress, // Required except during contract publications.\n    from: window.ethereum.selectedAddress, // must match user's active address.\n    data: window.contract.methods\n      .setApprovalForAll(contractAddress, true)\n      .encodeABI(),\n  };\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [transactionParameters],\n    });\n    return {\n      success: true,\n      status:\n        \"âœ… Check out your transaction on Etherscan: https://ropsten.etherscan.io/tx/\" +\n        txHash,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      status: \"ğŸ˜¥ Something went wrong: \" + error.message,\n    };\n  }\n};\n\n\nexport const transferToken = async (tokenContractAddress, tokenID) => {\n  if (tokenContractAddress== \"\" || tokenID == \"\") {\n    return {\n      success: false,\n      status: \"â—Please make sure all fields are completed\",\n    };\n  }\n\n  //make metadata\n  window.contract = await new web3.eth.Contract(contractABI, contractAddress);\n\n  const transactionParameters = {\n    to: contractAddress, // Required except during contract publications.\n    from: window.ethereum.selectedAddress, // must match user's active address.\n    data: window.contract.methods\n      .addToken(tokenContractAddress, tokenID)\n      .encodeABI(),\n  };\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [transactionParameters],\n    });\n    return {\n      success: true,\n      status:\n        \"âœ… Check out your transaction on Etherscan: https://ropsten.etherscan.io/tx/\" +\n        txHash,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      status: \"ğŸ˜¥ Something went wrong: \" + error.message,\n    };\n  }\n};\n\n"]},"metadata":{},"sourceType":"module"}